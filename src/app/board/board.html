<div class="board" ng-controller="BoardCtrl as boardCtrl">
  <toaster-container class="board-toaster"></toaster-container>
  <ng-card-preview ng-cards="boardCtrl.My.cards" ng-get-image-function="boardCtrl.getCurrentImage"
    ng-current-card="boardCtrl.currentCard">
  </ng-card-preview>

  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 80" style="height: 80%;width: 100%;">
    <g ng-repeat="card in boardCtrl.My.cards" ng-show="boardCtrl.currentCard == card">
      <g>
        <rect ng-repeat="i in [6, 5, 4, 3, 2, 1, 0]" class="possibility" height="10" width="5" x="0"
              ng-attr_y="{{ $index * 10 + 5 }}" hm-tap="boardCtrl.previewCard(i)" ng-click="boardCtrl.previewCard(i)"
              ng-show="boardCtrl.canDisplayPossibilities(card)"
              ng-class="{'card-selectable': boardCtrl.indexIsPossible(card, i)}">
        </rect>
      </g>
      <g>
        <rect ng-repeat="i in [7, 8, 9, 10, 11]" class="possibility" height="5" width="11" y="0"
              ng-attr_x="{{ 5 + $index * 11 }}" hm-tap="boardCtrl.previewCard(i)" ng-click="boardCtrl.previewCard(i)"
              ng-show="boardCtrl.canDisplayPossibilities(card)"
              ng-class="{'card-selectable': boardCtrl.indexIsPossible(card, i)}">
        </rect>
      </g>
      <g>
        <rect ng-repeat="i in [12, 13, 14, 15, 16, 17, 18]" class="possibility" height="10" width="5" x="60"
              ng-attr_y="{{ $index * 10 + 5 }}" hm-tap="boardCtrl.previewCard(i)" ng-click="boardCtrl.previewCard(i)"
              ng-show="boardCtrl.canDisplayPossibilities(card)"
              ng-class="{'card-selectable': boardCtrl.indexIsPossible(card, i)}">
        </rect>
      </g>
      <g>
        <rect ng-repeat="i in [19, 20, 21, 22, 23]" class="possibility" height="5" width="11"
              ng-attr_x="{{ 5 + $index * 11 }}" hm-tap="boardCtrl.previewCard(i)" ng-click="boardCtrl.previewCard(i)"
              ng-show="boardCtrl.canDisplayPossibilities(card)"
              ng-class="{'card-selectable': boardCtrl.indexIsPossible(card, i)}" y="75">
        </rect>
      </g>
      <g width="55" height="70">
        <image hm-swipeleft="boardCtrl.showNextCard($index)" hm-swiperight="boardCtrl.showPreviousCard($index)"
               ng-click="boardCtrl.showNextCard($index)"
               ng-href="{{boardCtrl.trustSrc(boardCtrl.getCurrentImage(card))}}"
               xlink:href="" x="5" y="5" width="55" height="70" preserveAspectRatio="none">
        </image>
        <foreignObject width="16" height="2" x="24.5" y="64">
          <ul class="card-bullets">
            <li ng-repeat="card in boardCtrl.My.cards" ng-class="{'current' : boardCtrl.currentCard == card}"></li>
          </ul>
        </foreignObject>
        <foreignObject width="28" height="24" x="18.5" y="28"
                       ng-show="boardCtrl.isCurrentMode('trash')"
                       class="card-overlay">
          <button class="select-card-button" ng-class="{'active' : boardCtrl.cardIsSelected($index) }"
                  hm-tap="boardCtrl.selectCardToggle($index)">
            <i class="fa fa-check"></i>
          </button>
        </foreignObject>
        <foreignObject width="55" height="70" x="5" y="5" ng-show="boardCtrl.isCurrentMode('trap') && card.type == 'trap'">
          <ul style="margin: 0;padding: 0;overflow-y: auto;overflow-x: hidden;height: 70px;">
            <li ng-repeat="playerName in boardCtrl.players" width="55" height="5" style="font-size: 10px;"
              ng-click="boardCtrl.trapPlayer(playerName)">
              {{ playerName }}
            </li>
          </ul>
        </foreignObject>
      </g>
    </g>
  </svg>
  <div>
    <actionnavbar on-start="boardCtrl.showStartRemote()" on-move-map="boardCtrl.showMoveMapRemote()"
                  on-tack-babord="boardCtrl.tack(-90)" on-tack-tribord="boardCtrl.tack(90)"
                  on-trash="boardCtrl.dropCards()" on-clear-preview="boardCtrl.clearPreview()"
                  on-play="boardCtrl.play()" on-trap="boardCtrl.trap()" mode="boardCtrl.mode"
                  flag-is-visible="!boardCtrl.My.started" clear-is-visible="boardCtrl.clearIsVisible()"
                  trap-is-visible="boardCtrl.modeIsVisible('trap')" trash-is-visible="boardCtrl.modeIsVisible('trash')"
                  play-is-visible="boardCtrl.modeIsVisible('play')">
    </actionnavbar>

    <placeboatremote is-visible="boardCtrl.startRemoteIsVisible" player="boardCtrl.My"
                     game-id="boardCtrl.gameId"></placeboatremote>

    <movemapremote is-visible="boardCtrl.moveMapRemoteIsVisible" game-id="boardCtrl.gameId"></movemapremote>
  </div>
</div>
